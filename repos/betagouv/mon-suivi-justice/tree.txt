.
├── .browserslistrc
├── .buildpacks
├── .env.example
├── .erdconfig
├── .gitattributes
├── .github
│   ├── dependabot.yml
│   └── workflows
│       └── main.yml
├── .gitignore
├── .husky
│   └── pre-commit
├── .nvmrc
├── .rubocop.yml
├── .ruby-gemset
├── .ruby-version
├── .slugignore
├── .talismanrc
├── .vscode
│   └── settings.json
├── Gemfile
├── Gemfile.lock
├── Guardfile
├── LICENCE.txt
├── Procfile
├── Procfile.dev
├── README.md
├── Rakefile
├── app
│   ├── assets
│   │   ├── builds
│   │   │   └── .keep
│   │   ├── config
│   │   │   └── manifest.js
│   │   ├── fonts
│   │   │   ├── Marianne-Bold.woff
│   │   │   ├── Marianne-Bold.woff2
│   │   │   ├── Marianne-Bold_Italic.woff
│   │   │   ├── Marianne-Bold_Italic.woff2
│   │   │   ├── Marianne-ExtraBold.woff
│   │   │   ├── Marianne-ExtraBold.woff2
│   │   │   ├── Marianne-ExtraBold_Italic.woff
│   │   │   ├── Marianne-ExtraBold_Italic.woff2
│   │   │   ├── Marianne-Light.woff
│   │   │   ├── Marianne-Light.woff2
│   │   │   ├── Marianne-Light_Italic.woff
│   │   │   ├── Marianne-Light_Italic.woff2
│   │   │   ├── Marianne-Medium.woff
│   │   │   ├── Marianne-Medium.woff2
│   │   │   ├── Marianne-Medium_Italic.woff
│   │   │   ├── Marianne-Medium_Italic.woff2
│   │   │   ├── Marianne-Regular.woff
│   │   │   ├── Marianne-Regular.woff2
│   │   │   ├── Marianne-Regular_Italic.woff
│   │   │   ├── Marianne-Regular_Italic.woff2
│   │   │   ├── Spectral-ExtraBold.woff
│   │   │   ├── Spectral-ExtraBold.woff2
│   │   │   ├── Spectral-Regular.woff
│   │   │   └── Spectral-Regular.woff2
│   │   ├── images
│   │   │   ├── expand-up-down-line.svg
│   │   │   ├── favicon.ico
│   │   │   └── logo_msj.svg
│   │   ├── javascripts
│   │   │   └── administrate
│   │   │       ├── application.js
│   │   │       └── components
│   │   │           ├── associative.js
│   │   │           └── table.js
│   │   └── stylesheets
│   │       ├── actiontext.css
│   │       ├── administrate
│   │       │   ├── application.scss
│   │       │   ├── base
│   │       │   │   ├── _forms.scss
│   │       │   │   ├── _layout.scss
│   │       │   │   ├── _lists.scss
│   │       │   │   ├── _tables.scss
│   │       │   │   └── _typography.scss
│   │       │   ├── components
│   │       │   │   ├── _app-container.scss
│   │       │   │   ├── _attributes.scss
│   │       │   │   ├── _buttons.scss
│   │       │   │   ├── _cells.scss
│   │       │   │   ├── _field-unit.scss
│   │       │   │   ├── _flashes.scss
│   │       │   │   ├── _form-actions.scss
│   │       │   │   ├── _main-content.scss
│   │       │   │   ├── _navigation.scss
│   │       │   │   ├── _pagination.scss
│   │       │   │   └── _search.scss
│   │       │   ├── library
│   │       │   │   ├── _clearfix.scss
│   │       │   │   ├── _data-label.scss
│   │       │   │   └── _variables.scss
│   │       │   ├── reset
│   │       │   │   └── _normalize.scss
│   │       │   └── utilities
│   │       │       └── _text-color.scss
│   │       ├── application.postcss.css
│   │       ├── appointment_types.css
│   │       ├── appointments.css
│   │       ├── appointments_pdf.css
│   │       ├── authentication.css
│   │       ├── bex.css
│   │       ├── bex_pdf.css
│   │       ├── convicts.css
│   │       ├── dsfr_custom.css
│   │       ├── errors.css
│   │       ├── fonts.css
│   │       ├── forms.css
│   │       ├── home.css
│   │       ├── ie.css
│   │       ├── index.css
│   │       ├── index_cards.css
│   │       ├── layout.css
│   │       ├── main.css
│   │       ├── mixins.css
│   │       ├── modal.css
│   │       ├── organizations.css
│   │       ├── places.css
│   │       ├── print.css
│   │       ├── show.css
│   │       ├── slot_types.css
│   │       ├── slots.css
│   │       ├── users.css
│   │       ├── utilities.css
│   │       └── variables.css
│   ├── channels
│   │   └── application_cable
│   │       ├── channel.rb
│   │       └── connection.rb
│   ├── controllers
│   │   ├── admin
│   │   │   ├── application_controller.rb
│   │   │   ├── appointments_controller.rb
│   │   │   ├── cities_controller.rb
│   │   │   ├── convicts_controller.rb
│   │   │   ├── divestments_controller.rb
│   │   │   ├── headquarters_controller.rb
│   │   │   ├── import_convicts_controller.rb
│   │   │   ├── import_srjs_controller.rb
│   │   │   ├── organization_divestments_controller.rb
│   │   │   ├── organizations_controller.rb
│   │   │   ├── place_transferts_controller.rb
│   │   │   ├── places_controller.rb
│   │   │   ├── seeds_controller.rb
│   │   │   ├── srj_spips_controller.rb
│   │   │   ├── srj_tjs_controller.rb
│   │   │   ├── user_alerts_controller.rb
│   │   │   └── users_controller.rb
│   │   ├── agendas_controller.rb
│   │   ├── application_controller.rb
│   │   ├── appointment_types_controller.rb
│   │   ├── appointments_bookings_controller.rb
│   │   ├── appointments_controller.rb
│   │   ├── appointments_reschedules_controller.rb
│   │   ├── bex_controller.rb
│   │   ├── cities_controller.rb
│   │   ├── concerns
│   │   │   ├── .keep
│   │   │   └── inter_ressort_flashes.rb
│   │   ├── convicts_controller.rb
│   │   ├── divestments_controller.rb
│   │   ├── errors_controller.rb
│   │   ├── home_controller.rb
│   │   ├── invitations_controller.rb
│   │   ├── notification_types_reset_controller.rb
│   │   ├── organization_divestments_controller.rb
│   │   ├── organizations
│   │   │   └── statistics_controller.rb
│   │   ├── organizations_controller.rb
│   │   ├── places_controller.rb
│   │   ├── public_pages_controller.rb
│   │   ├── security_charter_acceptances_controller.rb
│   │   ├── slot_types_batches_controller.rb
│   │   ├── slot_types_controller.rb
│   │   ├── slots_batches_controller.rb
│   │   ├── slots_controller.rb
│   │   ├── unsubscribe_controller.rb
│   │   ├── user_user_alerts_controller.rb
│   │   └── users_controller.rb
│   ├── dashboards
│   │   ├── agenda_dashboard.rb
│   │   ├── ahoy
│   │   │   └── visit_dashboard.rb
│   │   ├── appointment_dashboard.rb
│   │   ├── appointment_type_dashboard.rb
│   │   ├── city_dashboard.rb
│   │   ├── convict_dashboard.rb
│   │   ├── divestment_dashboard.rb
│   │   ├── headquarter_dashboard.rb
│   │   ├── history_item_dashboard.rb
│   │   ├── import_convict_dashboard.rb
│   │   ├── import_srj_dashboard.rb
│   │   ├── notification_dashboard.rb
│   │   ├── notification_type_dashboard.rb
│   │   ├── organization_dashboard.rb
│   │   ├── organization_divestment_dashboard.rb
│   │   ├── paper_trail
│   │   │   └── version_dashboard.rb
│   │   ├── place_dashboard.rb
│   │   ├── place_transfert_dashboard.rb
│   │   ├── seed_dashboard.rb
│   │   ├── slot_dashboard.rb
│   │   ├── srj_spip_dashboard.rb
│   │   ├── srj_tj_dashboard.rb
│   │   ├── user_alert_dashboard.rb
│   │   └── user_dashboard.rb
│   ├── errors
│   │   └── sms_delivery_error.rb
│   ├── fields
│   │   ├── rich_text_area_field.rb
│   │   └── state_machine_field.rb
│   ├── helpers
│   │   ├── administrate
│   │   │   └── application_helper.rb
│   │   ├── agenda_helper.rb
│   │   ├── application_helper.rb
│   │   ├── appointment_type_helper.rb
│   │   ├── appointments_helper.rb
│   │   ├── bex_helper.rb
│   │   ├── convicts_helper.rb
│   │   ├── divestment_helper.rb
│   │   ├── extra_field_helper.rb
│   │   ├── organization_divestment_helper.rb
│   │   ├── organization_helper.rb
│   │   ├── place_helper.rb
│   │   ├── slots_helper.rb
│   │   ├── turbo_stream_helper.rb
│   │   └── users_helper.rb
│   ├── javascript
│   │   ├── agent_interface.js
│   │   ├── application.js
│   │   ├── appointment_index.js
│   │   ├── appointment_new.js
│   │   ├── appointment_show.js
│   │   ├── channels
│   │   │   └── index.js
│   │   ├── components
│   │   │   ├── appointment_booking.js
│   │   │   ├── keep_scroll.js
│   │   │   ├── modal.js
│   │   │   └── password_toggle.js
│   │   ├── controllers
│   │   │   ├── abyme_controller.js
│   │   │   ├── application.js
│   │   │   ├── appointment_extra_field_display_controller.js
│   │   │   ├── appointment_new_controller.js
│   │   │   ├── debounce_submit_controller.js
│   │   │   ├── disable_when_abyme_limit_reached_controller.js
│   │   │   ├── form_utilities.js
│   │   │   ├── index.js
│   │   │   ├── pick_multiple_dates_controller.js
│   │   │   ├── search_cities_controller.js
│   │   │   ├── search_cities_results_controller.js
│   │   │   ├── search_users_controller.js
│   │   │   ├── search_users_results_controller.js
│   │   │   └── table_update_field_controller.js
│   │   ├── convict.js
│   │   ├── gouvfr-module.js
│   │   ├── gouvfr-nomodule.js
│   │   ├── icons.js
│   │   ├── jquery.js
│   │   └── slots_index.js
│   ├── jobs
│   │   ├── appi_import_job.rb
│   │   ├── application_job.rb
│   │   ├── archive_unactive_convicts_job.rb
│   │   ├── archived_convicts_destroy_job.rb
│   │   ├── create_contact_in_brevo_job.rb
│   │   ├── delete_contact_in_brevo_job.rb
│   │   ├── delete_convict_job.rb
│   │   ├── delete_place_transfert_job.rb
│   │   ├── execute_stored_procedures_job.rb
│   │   ├── handle_misrouted_notifications_job.rb
│   │   ├── handle_stalled_divestments_job.rb
│   │   ├── link_convict_from_organizations_source_job.rb
│   │   ├── manage_notification_problems.rb
│   │   ├── prepare_place_transfert_job.rb
│   │   ├── slot_creation_job.rb
│   │   ├── sms_delivery_job.rb
│   │   ├── sms_schedule_job.rb
│   │   ├── srj_import_job.rb
│   │   ├── tracking_cleaning_job.rb
│   │   ├── transfert_places_job.rb
│   │   ├── update_contact_in_brevo_job.rb
│   │   ├── update_convict_phone_job.rb
│   │   └── user_alert_delivery_job.rb
│   ├── mailers
│   │   ├── admin_mailer.rb
│   │   ├── application_mailer.rb
│   │   └── user_mailer.rb
│   ├── models
│   │   ├── agenda.rb
│   │   ├── ahoy
│   │   │   ├── event.rb
│   │   │   └── visit.rb
│   │   ├── application_record.rb
│   │   ├── appointment.rb
│   │   ├── appointment_extra_field.rb
│   │   ├── appointment_type.rb
│   │   ├── city.rb
│   │   ├── concerns
│   │   │   ├── deployment_environment.rb
│   │   │   ├── normalized_phone.rb
│   │   │   └── transfert_validator.rb
│   │   ├── convict.rb
│   │   ├── convicts_organizations_mapping.rb
│   │   ├── divestment.rb
│   │   ├── extra_field.rb
│   │   ├── headquarter.rb
│   │   ├── history_item.rb
│   │   ├── metabase_dashboard.rb
│   │   ├── notification.rb
│   │   ├── notification_type.rb
│   │   ├── organization.rb
│   │   ├── organization_divestment.rb
│   │   ├── place.rb
│   │   ├── place_appointment_type.rb
│   │   ├── place_transfert.rb
│   │   ├── slot.rb
│   │   ├── slot_type.rb
│   │   ├── srj_spip.rb
│   │   ├── srj_tj.rb
│   │   ├── user.rb
│   │   ├── user_alert.rb
│   │   └── user_user_alert.rb
│   ├── policies
│   │   ├── agenda_policy.rb
│   │   ├── application_policy.rb
│   │   ├── appointment_policy.rb
│   │   ├── appointment_type_policy.rb
│   │   ├── appointments_reschedules_policy.rb
│   │   ├── bex_policy.rb
│   │   ├── city_policy.rb
│   │   ├── concerns
│   │   │   └── appointment_hability_checkable.rb
│   │   ├── convict_policy.rb
│   │   ├── divestment_policy.rb
│   │   ├── notification_type_policy.rb
│   │   ├── organization_divestment_policy.rb
│   │   ├── organization_policy.rb
│   │   ├── organizations
│   │   │   └── statistic_policy.rb
│   │   ├── place_policy.rb
│   │   ├── security_charter_acceptance_policy.rb
│   │   ├── slot_policy.rb
│   │   ├── slot_type_policy.rb
│   │   ├── user_policy.rb
│   │   ├── user_service_switch_policy.rb
│   │   └── user_user_alert_policy.rb
│   ├── queries
│   │   └── notifications
│   │       ├── to_be_marked_as_failed_query.rb
│   │       └── to_reschedule_query.rb
│   ├── services
│   │   ├── admin
│   │   │   └── db_reset_service.rb
│   │   ├── brevo_adapter.rb
│   │   ├── cleanup
│   │   │   └── archive_unactive_convicts.rb
│   │   ├── convict_duplicates
│   │   │   ├── merge_appi_uuid_duplicates.rb
│   │   │   ├── merge_firstname_lastname_dob_duplicates.rb
│   │   │   └── merge_firstname_lastname_phone_duplicates.rb
│   │   ├── convicts
│   │   │   └── merge_service.rb
│   │   ├── divestment_creator_service.rb
│   │   ├── divestment_proposal_service.rb
│   │   ├── divestment_stalled_service.rb
│   │   ├── divestment_state_service.rb
│   │   ├── history_item_factory.rb
│   │   ├── link_mobility_adapter.rb
│   │   ├── notification_factory.rb
│   │   ├── slot_factory.rb
│   │   ├── slot_type_factory.rb
│   │   └── sms_delivery_service.rb
│   ├── validators
│   │   ├── appi_uuid_validator.rb
│   │   └── email_validator.rb
│   ├── value_objects
│   │   └── sms_api_response.rb
│   └── views
│       ├── abyme
│       │   └── _extra_field_fields.html.erb
│       ├── active_storage
│       │   └── blobs
│       │       └── _blob.html.erb
│       ├── admin
│       │   ├── application
│       │   │   ├── _flashes.html.erb
│       │   │   ├── _icons.html.erb
│       │   │   ├── _javascript.html.erb
│       │   │   ├── _navigation.html.erb
│       │   │   └── _stylesheet.html.erb
│       │   ├── convicts
│       │   │   ├── merge_form.html.erb
│       │   │   └── merge_preview.html.erb
│       │   ├── divestments
│       │   │   └── index.html.erb
│       │   ├── import_convicts
│       │   │   └── index.html.erb
│       │   ├── import_srjs
│       │   │   └── index.html.erb
│       │   ├── organization_divestments
│       │   │   ├── _form.html.erb
│       │   │   └── edit.html.erb
│       │   ├── organizations
│       │   │   └── show.html.erb
│       │   ├── place_transferts
│       │   │   ├── _form.html.erb
│       │   │   └── new.html.erb
│       │   ├── places
│       │   │   └── index.html.erb
│       │   ├── public_pages
│       │   │   ├── index.html.erb
│       │   │   └── templates
│       │   │       └── preparer_page_template.html.erb
│       │   ├── seeds
│       │   │   └── index.html.erb
│       │   ├── user_alerts
│       │   │   ├── _form.html.erb
│       │   │   ├── edit.html.erb
│       │   │   └── show.html.erb
│       │   └── users
│       │       ├── _collection.html.erb
│       │       ├── _index_header.html.erb
│       │       ├── _search.html.erb
│       │       └── index.html.erb
│       ├── admin_mailer
│       │   ├── appi_import_report.html.erb
│       │   ├── brevo_sync_failure.html.erb
│       │   ├── link_convict_from_organizations_source.html.erb
│       │   ├── notifications_problems.html.erb
│       │   ├── prepare_place_transfert.html.erb
│       │   ├── srj_import_report.html.erb
│       │   ├── user_alert_delivery_report.html.erb
│       │   └── warn_link_mobility_for_misrouted_notifications.html.erb
│       ├── api
│       │   └── v1
│       │       ├── appointments
│       │       │   └── _appointment.json.jbuilder
│       │       ├── convicts
│       │       │   ├── _convict.json.jbuilder
│       │       │   ├── cpip.json.jbuilder
│       │       │   └── show.json.jbuilder
│       │       ├── places
│       │       │   └── _place.json.jbuilder
│       │       └── users
│       │           └── _user.json.jbuilder
│       ├── appointment_types
│       │   ├── edit.html.erb
│       │   └── index.html.erb
│       ├── appointments
│       │   ├── _appointment_card_pdf.html.erb
│       │   ├── _cancel_appointment_modal.html.erb
│       │   ├── _convict_phone_status.html.erb
│       │   ├── _missed_appointment_modal.html.erb
│       │   ├── _rebook_missed_appointment_modal.html.erb
│       │   ├── index.html.erb
│       │   ├── index_pdf.html.erb
│       │   ├── new.html.erb
│       │   └── show.html.erb
│       ├── appointments_bookings
│       │   ├── _load_agendas.html.erb
│       │   ├── _load_cities.html.erb
│       │   ├── _load_is_cpip.html.erb
│       │   ├── _load_places.html.erb
│       │   ├── _load_prosecutor.html.erb
│       │   ├── _load_slot_fields.html.erb
│       │   ├── _load_slots.html.erb
│       │   ├── _load_submit_button.html.erb
│       │   ├── load_agendas.js.erb
│       │   ├── load_cities.js.erb
│       │   ├── load_is_cpip.js.erb
│       │   ├── load_places.js.erb
│       │   ├── load_prosecutor.js.erb
│       │   ├── load_slot_fields.js.erb
│       │   ├── load_slots.js.erb
│       │   └── load_submit_button.js.erb
│       ├── appointments_reschedules
│       │   └── new.html.erb
│       ├── bex
│       │   ├── agenda_jap.html.erb
│       │   ├── agenda_jap_pdf.html.erb
│       │   ├── agenda_sap_ddse.html.erb
│       │   ├── agenda_sap_ddse_pdf.html.erb
│       │   ├── agenda_spip.html.erb
│       │   └── agenda_spip_pdf.html.erb
│       ├── cities
│       │   └── search.html.erb
│       ├── convicts
│       │   ├── _duplicate_convict_card.html.erb
│       │   ├── _duplicate_convict_inter_ressort_card.html.erb
│       │   ├── _missed_appointment_modal.html.erb
│       │   ├── _phone_status.html.erb
│       │   ├── archive.turbo_stream.erb
│       │   ├── destroy.turbo_stream.erb
│       │   ├── edit.html.erb
│       │   ├── index.html.erb
│       │   ├── new.html.erb
│       │   ├── self_assign.turbo_stream.erb
│       │   ├── show.html.erb
│       │   ├── unarchive.turbo_stream.erb
│       │   └── unassign.turbo_stream.erb
│       ├── devise
│       │   ├── confirmations
│       │   │   └── new.html.erb
│       │   ├── invitations
│       │   │   ├── edit.html.erb
│       │   │   └── new.html.erb
│       │   ├── mailer
│       │   │   ├── confirmation_instructions.html.erb
│       │   │   ├── email_changed.html.erb
│       │   │   ├── invitation_instructions.html.erb
│       │   │   ├── invitation_instructions.text.erb
│       │   │   ├── password_change.html.erb
│       │   │   ├── reset_password_instructions.html.erb
│       │   │   └── unlock_instructions.html.erb
│       │   ├── passwords
│       │   │   ├── edit.html.erb
│       │   │   └── new.html.erb
│       │   ├── registrations
│       │   │   ├── edit.html.erb
│       │   │   └── new.html.erb
│       │   ├── sessions
│       │   │   └── new.html.erb
│       │   ├── shared
│       │   │   ├── _error_messages.html.erb
│       │   │   └── _links.html.erb
│       │   └── unlocks
│       │       └── new.html.erb
│       ├── errors
│       │   ├── internal_server_error.html.erb
│       │   ├── not_found.html.erb
│       │   └── unprocessable_entity.html.erb
│       ├── fields
│       │   ├── rich_text_area_field
│       │   │   ├── _form.html.erb
│       │   │   ├── _index.html.erb
│       │   │   └── _show.html.erb
│       │   └── state_machine_field
│       │       ├── _form.html.erb
│       │       ├── _index.html.erb
│       │       └── _show.html.erb
│       ├── home
│       │   └── home.html.erb
│       ├── kaminari
│       │   ├── _first_page.html.erb
│       │   ├── _gap.html.erb
│       │   ├── _last_page.html.erb
│       │   ├── _next_page.html.erb
│       │   ├── _page.html.erb
│       │   ├── _paginator.html.erb
│       │   └── _prev_page.html.erb
│       ├── layouts
│       │   ├── _breadcrumb.html.erb
│       │   ├── _header.html.erb
│       │   ├── _header_no_auth.html.erb
│       │   ├── _ie_warning.html.erb
│       │   ├── _main_navigation.html.erb
│       │   ├── _support_modal.html.erb
│       │   ├── admin
│       │   │   └── application.html.erb
│       │   ├── agent_interface.html.erb
│       │   ├── application.html.erb
│       │   ├── authentication.html.erb
│       │   ├── mailer.html.erb
│       │   ├── mailer.text.erb
│       │   ├── pdf.html.erb
│       │   └── public_pages.erb
│       ├── organization_divestments
│       │   ├── _divestments.html.erb
│       │   ├── _divestments_table.html.erb
│       │   ├── _organization_divestments.html.erb
│       │   ├── _organization_divestments_table.html.erb
│       │   ├── edit.html.erb
│       │   ├── index.html.erb
│       │   └── show.html.erb
│       ├── organizations
│       │   ├── edit.html.erb
│       │   ├── index.html.erb
│       │   ├── new.html.erb
│       │   └── statistics
│       │       └── index.html.erb
│       ├── places
│       │   ├── _agenda_fields.html.erb
│       │   ├── edit.html.erb
│       │   ├── index.html.erb
│       │   └── new.html.erb
│       ├── public_pages
│       │   └── convict_interface.html.erb
│       ├── security_charter_acceptances
│       │   └── new.html.erb
│       ├── shared
│       │   ├── _alert_notice.html.erb
│       │   ├── _analytics.html.erb
│       │   ├── _appointment_card.html.erb
│       │   ├── _appointments_table.html.erb
│       │   ├── _city_selector.html.erb
│       │   ├── _convict_row.html.erb
│       │   ├── _convict_search_form.html.erb
│       │   ├── _convict_self_assign_link.html.erb
│       │   ├── _convicts_list.html.erb
│       │   ├── _environment_alert.html.erb
│       │   ├── _flashes.html.erb
│       │   ├── _history_items.html.erb
│       │   ├── _jap_agendas_modal.html.erb
│       │   ├── _standard_error.html.erb
│       │   ├── _unauthorized_error.html.erb
│       │   └── _user_selector.html.erb
│       ├── slot_types
│       │   └── index.html.erb
│       ├── slots
│       │   ├── edit.html.erb
│       │   └── index.html.erb
│       ├── slots_batches
│       │   ├── _interval_fields.html.erb
│       │   ├── _time_fields.html.erb
│       │   └── new.html.erb
│       ├── unsubscribe
│       │   ├── _stop_sms_error.html.erb
│       │   ├── _stop_sms_success.html.erb
│       │   └── stop_sms.html.erb
│       ├── user_mailer
│       │   ├── divestment_accepted.html.erb
│       │   ├── divestment_refused.html.erb
│       │   ├── notify_local_admins_of_divestment.html.erb
│       │   ├── notify_local_admins_of_mutation.html.erb
│       │   └── notify_mutation.html.erb
│       └── users
│           ├── _users_table.html.erb
│           ├── edit.html.erb
│           ├── index.html.erb
│           ├── invitation_link.html.erb
│           ├── reset_pwd_link.html.erb
│           ├── search.html.erb
│           └── show.html.erb
├── babel.config.js
├── bin
│   ├── bundle
│   ├── dev
│   ├── rails
│   ├── rake
│   ├── setup
│   ├── spring
│   └── yarn
├── cleanup_unwanted_convict.rb
├── cli
├── config
│   ├── application.rb
│   ├── boot.rb
│   ├── brakeman.ignore
│   ├── cable.yml
│   ├── clock.rb
│   ├── credentials.yml.enc
│   ├── database.yml
│   ├── environment.rb
│   ├── environments
│   │   ├── development.rb
│   │   ├── production.rb
│   │   └── test.rb
│   ├── initializers
│   │   ├── abyme.rb
│   │   ├── ahoy.rb
│   │   ├── application_controller_renderer.rb
│   │   ├── assets.rb
│   │   ├── backtrace_silencers.rb
│   │   ├── content_security_policy.rb
│   │   ├── cookies_serializer.rb
│   │   ├── devise.rb
│   │   ├── devise_security.rb
│   │   ├── filter_parameter_logging.rb
│   │   ├── inflections.rb
│   │   ├── kaminari.rb
│   │   ├── mime_types.rb
│   │   ├── permissions_policy.rb
│   │   ├── ransack.rb
│   │   ├── sentry.rb
│   │   ├── sidekiq.rb
│   │   ├── simple_form.rb
│   │   ├── time_formats.rb
│   │   ├── wicked_pdf.rb
│   │   └── wrap_parameters.rb
│   ├── locales
│   │   ├── dates.fr.yml
│   │   ├── devise.security_extension.fr.yml
│   │   ├── devise.views.fr.yml
│   │   ├── devise_invitable.fr.yml
│   │   ├── fr.yml
│   │   ├── secure_password.fr.yml
│   │   └── simple_form.en.yml
│   ├── puma.rb
│   ├── routes.rb
│   ├── spring.rb
│   └── storage.yml
├── config.ru
├── db
│   ├── migrate
│   │   ├── 20210527162209_create_convicts.rb
│   │   ├── 20210528085756_devise_create_users.rb
│   │   ├── 20210529133349_add_role_to_users.rb
│   │   ├── 20210529135234_add_name_to_users.rb
│   │   ├── 20210530122412_create_appointments.rb
│   │   ├── 20210530124351_add_convict_to_appointments.rb
│   │   ├── 20210601153602_remove_slot_from_appointments.rb
│   │   ├── 20210604075536_create_places.rb
│   │   ├── 20210604085600_add_place_to_appointments.rb
│   │   ├── 20210608111759_create_slots.rb
│   │   ├── 20210611094137_remove_place_from_appointment.rb
│   │   ├── 20210611122044_add_available_to_slots.rb
│   │   ├── 20210613120614_create_appointment_types.rb
│   │   ├── 20210613120704_create_notifications.rb
│   │   ├── 20210613120840_add_appointment_type_to_appointments.rb
│   │   ├── 20210615085140_add_state_to_appointments.rb
│   │   ├── 20210615160118_remove_appointment_type_from_notification.rb
│   │   ├── 20210617123109_create_notification_types.rb
│   │   ├── 20210623113505_devise_invitable_add_to_users.rb
│   │   ├── 20210625091322_add_role_to_notification.rb
│   │   ├── 20210625131920_add_reminder_period_to_notification.rb
│   │   ├── 20210629072853_add_title_to_convict.rb
│   │   ├── 20210629092216_add_phone_data_to_convict.rb
│   │   ├── 20210701085100_add_data_to_slot.rb
│   │   ├── 20210701092920_create_slot_types.rb
│   │   ├── 20210701164004_add_place_type_to_place.rb
│   │   ├── 20210705081840_create_versions.rb
│   │   ├── 20210705081841_add_object_changes_to_versions.rb
│   │   ├── 20210705143551_add_used_capacity_to_slot.rb
│   │   ├── 20210706084757_add_appointment_type_to_slots.rb
│   │   ├── 20210722151934_create_agendas.rb
│   │   ├── 20210722152554_add_agenda_reference_toslot.rb
│   │   ├── 20210722153043_populate_agenda_id_in_slots.rb
│   │   ├── 20210722155642_add_null_false_to_slot_agenda_reference.rb
│   │   ├── 20210722160005_remove_place_reference_in_slot.rb
│   │   ├── 20210730081857_add_prosecutor_number_to_convict.rb
│   │   ├── 20210730084343_add_origin_department_to_appointment.rb
│   │   ├── 20210810144320_add_state_to_notifications.rb
│   │   ├── 20210811182929_remove_name_from_notifications.rb
│   │   ├── 20210812084642_remove_date_from_appointments.rb
│   │   ├── 20210825140239_create_history_items.rb
│   │   ├── 20210825141133_normalize_phone.rb
│   │   ├── 20210826140557_create_history_items_for_legacy_appointments.rb
│   │   ├── 20210827091639_add_external_id_to_notifications.rb
│   │   ├── 20210903105951_add_category_to_history_items.rb
│   │   ├── 20210917063220_move_slot_referece_from_agenda_to_slot_type.rb
│   │   ├── 20210917081930_create_place_appointment_types.rb
│   │   ├── 20210920134212_remove_place_type.rb
│   │   ├── 20210929063925_create_organization.rb
│   │   ├── 20210929065916_add_references_to_organization_on_user_and_place.rb
│   │   ├── 20211007115854_create_department.rb
│   │   ├── 20211008081150_create_areas_organizations_mapping.rb
│   │   ├── 20211013080642_create_jurisdiction.rb
│   │   ├── 20211014071821_create_areas_convicts_mapping.rb
│   │   ├── 20211105124341_remove_appointment_type_id_from_appointment.rb
│   │   ├── 20211110091013_add_api_uuid_on_convict.rb
│   │   ├── 20211118135817_create_previous_passwords.rb
│   │   ├── 20211119094311_add_delete_at_column_on_convict.rb
│   │   ├── 20211124100716_create_active_storage_tables.active_storage.rb
│   │   ├── 20211124100717_create_action_text_tables.action_text.rb
│   │   ├── 20211207094521_remove_title_from_convict.rb
│   │   ├── 20211217142652_add_content_to_history_item.rb
│   │   ├── 20220107141222_remove_deleted_at_from_convict.rb
│   │   ├── 20220107143055_add_discarded_at_to_convicts.rb
│   │   ├── 20220124181845_add_mail_to_places.rb
│   │   ├── 20220209143302_add_index_uniqueness_validate_slot_type.rb
│   │   ├── 20220209164708_add_preparation_link_to_place.rb
│   │   ├── 20220214171625_add_phone_to_user.rb
│   │   ├── 20220301100729_add_user_to_convicts.rb
│   │   ├── 20220314135643_add_full_to_slot.rb
│   │   ├── 20220315081532_add_share_info_to_convict_to_user.rb
│   │   ├── 20220329115507_separate_share_email_and_phone_to_convict.rb
│   │   ├── 20220329122927_add_prosecutor_number_to_appointment.rb
│   │   ├── 20220407121418_add_organization_type_to_organizations.rb
│   │   ├── 20220414160021_add_share_address_to_convict_to_appointment_type.rb
│   │   ├── 20220422153124_add_invitation_to_convict_interface_count_to_convict.rb
│   │   ├── 20220425142932_add_invitation_acceptation_to_convict.rb
│   │   ├── 20220427203023_add_last_invite_to_convict_interface_to_convict.rb
│   │   ├── 20220531131636_add_reference_to_organization_on_notification_type.rb
│   │   ├── 20220601174932_add_user_to_appointment.rb
│   │   ├── 20220726080727_add_case_prepared_to_appointment.rb
│   │   ├── 20220729130717_add_is_default_to_notification_type.rb
│   │   ├── 20220812075128_add_inviter_user_id_to_appointment.rb
│   │   ├── 20220817151358_remove_default_from_appointment_origin_department.rb
│   │   ├── 20220830143147_add_time_zone_to_organizations.rb
│   │   ├── 20220913075934_create_ahoy_visits_and_events.rb
│   │   ├── 20220928123112_add_archived_to_places.rb
│   │   ├── 20220928134058_add_discarded_at_to_agendas.rb
│   │   ├── 20220928134110_add_discarded_at_to_slot_types.rb
│   │   ├── 20220928134135_add_discarded_at_to_places.rb
│   │   ├── 20220928134958_remove_archived_from_places.rb
│   │   ├── 20221007081232_add_creating_organization_to_appointments.rb
│   │   ├── 20221130095103_create_user_notifications.rb
│   │   ├── 20230112100303_add_date_of_birth_to_convicts.rb
│   │   ├── 20230113151503_create_cities.rb
│   │   ├── 20230113153118_create_tjs.rb
│   │   ├── 20230113153328_create_spips.rb
│   │   ├── 20230117144859_create_extra_fields.rb
│   │   ├── 20230118140605_create_appointment_extra_fields.rb
│   │   ├── 20230120093739_add_index_to_cities.rb
│   │   ├── 20230120165558_add_spip_ref_to_cities.rb
│   │   ├── 20230120165608_add_tj_ref_to_cities.rb
│   │   ├── 20230124091307_add_structure_id_to_tjs.rb
│   │   ├── 20230124091314_add_structure_id_to_spips.rb
│   │   ├── 20230124100610_add_scope_to_extra_field.rb
│   │   ├── 20230124143620_add_homeless_to_convict.rb
│   │   ├── 20230124143753_add_lives_aborad_to_convict.rb
│   │   ├── 20230124143900_add_city_to_convicts.rb
│   │   ├── 20230202152647_create_join_table_organizations_convicts.rb
│   │   ├── 20230221160236_add_creating_organization_to_convicts.rb
│   │   ├── 20230222133056_add_linked_organization_ref_to_organization.rb
│   │   ├── 20230303134202_create_headquarters.rb
│   │   ├── 20230303134411_add_headquarter_ref_to_organization.rb
│   │   ├── 20230303141633_add_headquarter_ref_to_user.rb
│   │   ├── 20230309093547_create_join_table_appointment_type_extra_field.rb
│   │   ├── 20230314155118_remove_organization_not_null_constraint_from_spips.rb
│   │   ├── 20230321150345_change_tjs_and_spips_to_srj_tjs_and_spips.rb
│   │   ├── 20230321150812_change_spip_and_tj_columns_in_cities.rb
│   │   ├── 20230323090530_create_table_spips_and_tjs.rb
│   │   ├── 20230323101114_remove_linked_organization_ref_from_organization.rb
│   │   ├── 20230330082857_add_competence_japat_to_convict.rb
│   │   ├── 20230412080952_add_unaccent_extension.rb
│   │   ├── 20230427123309_add_use_inter_ressort_to_organization.rb
│   │   ├── 20230526091613_create_place_transfert.rb
│   │   ├── 20230620135108_modify_convicts_organizations_mappings.rb
│   │   ├── 20230622125651_change_default_value_for_user_role.rb
│   │   ├── 20230912121239_create_user_alerts.rb
│   │   ├── 20230926095358_create_users_user_alerts.rb
│   │   ├── 20230928123153_add_lockable_to_users.rb
│   │   ├── 20231005093918_add_columns_to_user_alerts.rb
│   │   ├── 20231119132139_add_full_name_to_convict.rb
│   │   ├── 20231222103644_create_divestments.rb
│   │   ├── 20240111142653_create_organization_divestments.rb
│   │   ├── 20240112160648_add_conditional_unique_index_to_divestments.rb
│   │   ├── 20240119144205_add_security_charter_accepted_at_to_user.rb
│   │   ├── 20240209095548_change_versions_object_to_jsonb.rb
│   │   ├── 20240219201008_remove_user_notifications_table.rb
│   │   ├── 20240222153243_change_default_sharing_for_agents.rb
│   │   ├── 20240229085031_remove_old_objects_from_paper_trail_versions.rb
│   │   ├── 20240314164801_add_full_name_to_users.rb
│   │   ├── 20240417141947_add_last_reminder_email_at_to_organization_divestments.rb
│   │   ├── 20240521070944_drop_department_table_and_associated.rb
│   │   ├── 20240719142013_add_fail_count_to_notification.rb
│   │   ├── 20240822112244_add_email_to_organizations.rb
│   │   ├── 20240827082931_add_service_name_to_active_storage_blobs.active_storage.rb
│   │   ├── 20240827082932_create_active_storage_variant_records.active_storage.rb
│   │   ├── 20240827082933_remove_not_null_on_active_storage_blobs_checksum.active_storage.rb
│   │   ├── 20240904134013_add_delivery_time_to_notifications.rb
│   │   ├── 20241008123812_add_index_to_notifications_delivery_time_and_state.rb
│   │   ├── 20241110110621_add_response_code_to_notifications.rb
│   │   ├── 20241115102407_make_user_nullable_in_divestments.rb
│   │   └── 20241206123624_add_unsubscribe_token_to_convicts.rb
│   ├── schema.rb
│   ├── seed_utils.rb
│   ├── seeds
│   │   ├── 1_create_notifications.rb
│   │   ├── 2_regular_sortie_audience.rb
│   │   ├── 3_inter_ressort_versaille.rb
│   │   ├── 4_inter_ressort_saint_malo.rb
│   │   ├── 5_extra_fields.rb
│   │   ├── 6_headquarter.rb
│   │   └── 7_setup_notifications.rb
│   └── seeds.rb
├── docs
│   ├── Appointment_state.png
│   ├── CONTRIBUTING.md
│   ├── INSTALL.md
│   ├── Notification_state.png
│   ├── ajouter_communes_srj.md
│   ├── ajouter_un_type_de_rdv.md
│   ├── conseils_divers.md
│   ├── deployer_un_nouveau_service.md
│   ├── erd.png
│   ├── fusionner_agendas.md
│   ├── inviter_des_agents_en_masse.md
│   ├── manipulation_de_creneaux.md
│   ├── mise_en_production.md
│   ├── modification_creneaux_recurents.png
│   ├── obtenir_infos_sur_utilisation.md
│   └── recuperer_service_supprime.md
├── lib
│   ├── assets
│   │   └── .keep
│   └── tasks
│       ├── auto_generate_diagram.rake
│       ├── brevo.rake
│       ├── convicts.rake
│       ├── fix_appointments.rake
│       ├── import_service_mail.rake
│       ├── invite_agents.rake
│       └── merge_convicts.rake
├── log
│   └── .keep
├── package.json
├── postcss.config.js
├── public
│   ├── maintenance.html
│   └── robots.txt
├── scalingo.json
├── scripts
│   ├── deploy-prod
│   ├── move_prosecutor.rb
│   ├── script-dump
│   └── test_sms_provider
│       └── link_mobility
│           └── send_test_sms.rb
├── spec
│   ├── controllers
│   │   ├── appointments_bookings_controller_spec.rb
│   │   └── divestments_controller_spec.rb
│   ├── factories
│   │   ├── agendas.rb
│   │   ├── appointment.rb
│   │   ├── appointment_extra_fields.rb
│   │   ├── appointment_types.rb
│   │   ├── cities.rb
│   │   ├── convict.rb
│   │   ├── divestment.rb
│   │   ├── extra_fields.rb
│   │   ├── headquarters.rb
│   │   ├── notification_types.rb
│   │   ├── notifications.rb
│   │   ├── organization_divestments.rb
│   │   ├── organizations.rb
│   │   ├── place_appointment_types.rb
│   │   ├── place_transfert.rb
│   │   ├── places.rb
│   │   ├── slot_types.rb
│   │   ├── slots.rb
│   │   ├── srj_spips.rb
│   │   ├── srj_tjs.rb
│   │   ├── user.rb
│   │   └── user_alerts.rb
│   ├── features
│   │   ├── appointment_extra_fields_spec.rb
│   │   ├── appointment_types_spec.rb
│   │   ├── appointments_spec.rb
│   │   ├── bex_spec.rb
│   │   ├── convicts_spec.rb
│   │   ├── divestments_spec.rb
│   │   ├── history_items_spec.rb
│   │   ├── home_spec.rb
│   │   ├── import_convicts_spec.rb
│   │   ├── notification_types_spec.rb
│   │   ├── notifications_spec.rb
│   │   ├── organization_statistics_spec.rb
│   │   ├── organizations_spec.rb
│   │   ├── places_spec.rb
│   │   ├── security_charter_acceptance_spec.rb
│   │   ├── slot_types_spec.rb
│   │   ├── slots_spec.rb
│   │   ├── stop_sms_spec.rb
│   │   ├── user_alerts_spec.rb
│   │   ├── user_mutation_spec.rb
│   │   └── users_spec.rb
│   ├── fixtures
│   │   └── valid_convicts.csv
│   ├── helpers
│   │   ├── application_helper_spec.rb
│   │   ├── appointments_helper_spec.rb
│   │   └── organization_divestment_helper_spec.rb
│   ├── jobs
│   │   ├── appi_import_job_spec.rb
│   │   ├── archived_convicts_destroy_job_spec.rb
│   │   ├── delete_place_transfert_job_spec.rb
│   │   ├── handle_misrouted_notifications_job_spec.rb
│   │   ├── manage_notification_problems_spec.rb
│   │   ├── prepare_place_transfert_job_spec.rb
│   │   ├── slot_creation_job_spec.rb
│   │   ├── sms_delivery_job_spec.rb
│   │   ├── sms_schedule_job_spec.rb
│   │   └── transfert_places_job_spec.rb
│   ├── mailers
│   │   ├── admin_mailer_spec.rb
│   │   ├── admin_spec.rb
│   │   ├── devise_invitable_spec.rb
│   │   ├── previews
│   │   │   ├── admin_mailer_preview.rb
│   │   │   └── admin_preview.rb
│   │   └── user_mailer_spec.rb
│   ├── models
│   │   ├── agenda_spec.rb
│   │   ├── appointment_extra_field_spec.rb
│   │   ├── appointment_spec.rb
│   │   ├── appointment_type_spec.rb
│   │   ├── city_spec.rb
│   │   ├── convict_spec.rb
│   │   ├── extra_field_spec.rb
│   │   ├── history_item_spec.rb
│   │   ├── notification_spec.rb
│   │   ├── notification_type_spec.rb
│   │   ├── organization_divestment_spec.rb
│   │   ├── organization_spec.rb
│   │   ├── place_appointment_type_spec.rb
│   │   ├── place_spec.rb
│   │   ├── shared_normalized_phone.rb
│   │   ├── slot_spec.rb
│   │   ├── slot_type_spec.rb
│   │   ├── srj_spip_spec.rb
│   │   ├── srj_tj_spec.rb
│   │   ├── user_alert_spec.rb
│   │   └── user_spec.rb
│   ├── policies
│   │   ├── agenda_policy_spec.rb
│   │   ├── appointment_policy_spec.rb
│   │   ├── appointment_type_policy_spec.rb
│   │   ├── appointments_reschedules_policy_spec.rb
│   │   ├── convict_policy_spec.rb
│   │   ├── divestment_policy_spec.rb
│   │   ├── notification_type_policy_spec.rb
│   │   ├── organization_divestment_policy_spec.rb
│   │   ├── organizations
│   │   │   └── statistic_policy_spec.rb
│   │   ├── organizaton_policy_spec.rb
│   │   ├── place_policy_spec.rb
│   │   ├── security_charter_acceptance_policy_spec.rb
│   │   ├── slot_policy_spec.rb
│   │   ├── slot_type_policy_spec.rb
│   │   ├── user_policy_spec.rb
│   │   └── user_service_switch_policy_spec.rb
│   ├── queries
│   │   ├── to_be_marked_as_failed_query_spec.rb
│   │   └── to_reschedule_query_spec.rb
│   ├── rails_helper.rb
│   ├── services
│   │   ├── cleanup_spec.rb
│   │   ├── convict_duplicates_spec.rb
│   │   ├── divestment_creator_service_spec.rb
│   │   ├── divestment_proposal_service_spec.rb
│   │   ├── divestment_stalled_service_spec.rb
│   │   ├── divestment_state_service_spec.rb
│   │   ├── history_item_factory_spec.rb
│   │   ├── link_mobility_adapter_spec.rb
│   │   ├── notification_factory_spec.rb
│   │   ├── slot_factory_spec.rb
│   │   ├── slot_type_factory_spec.rb
│   │   └── sms_delivery_service_spec.rb
│   ├── spec_helper.rb
│   ├── support
│   │   ├── notification_helpers.rb
│   │   ├── shared_examples
│   │   │   └── convict_search_examples.rb
│   │   └── with_env.rb
│   ├── tasks
│   │   └── fix_appointments_spec.rb
│   └── views
│       └── organization_divestment
│           ├── index.html.erb_spec.rb
│           └── show.html.erb_spec.rb
├── storage
│   └── .keep
├── tmp
│   ├── .keep
│   └── pids
│       └── .keep
├── vendor
│   └── assets
│       └── stylesheets
│           └── .keep
└── yarn.lock
160 directories, 901 files
